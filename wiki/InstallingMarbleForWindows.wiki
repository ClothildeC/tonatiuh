#summary Instructions to install the Marble library needed to develop Tonatiuh under Windows XP, Windows Vista or Windows 7.

= Introduction =

Marble is a Virtual Globe and World Atlas. As a library, it is used within Tonatiuh to provide the geographical positioning functionalities needed, among other things, to facilitate the user the task of specifying the location on Earh of the solar concentrating systems she or he wants to analyze.

Here you will find instructions to install the Marble library in your computer and make this library available for the development of Tonatiuh.

= Details =

To compile marble you need CMake -a cross-platform make. To obtain it follow this [http://www.cmake.org/cmake/resources/software.html link] to go to the CMake webpage. Once you reach de webpage, click on the link titled _"cmake-2.8.2-win32-x86.exe"_, which is the CMake binary installer for Windows (see Figure 1). This will start the downloading of the CMake installer. When prompted, select the appropriate option to store the excutable file in your computer. Then, left-click twice on the installer and install CMake at the folder _"C:\sde\CMake"_.

||http://lh5.ggpht.com/_tmEVMS15i5Y/TLDLa3oJp1I/AAAAAAAAAn4/mZPF8osxLas/s400/CMake_installer.png||
|| *Figure 1.* View of the "CMake" webpage.||

Now, you need to download the latest stable version of the Marble source code. To do it, you need to use a subversion or svn client to access the appropriate Marble's svn repository and check out the appropriate marble folder, with all of its content, including all files and subdirectories.

If you have installed in your computer a command-line svn client, the command you should execute in your MSDOS-like shell or in your MSYS Linux-like shell to get the marble folder with all its content is:

{{{
svn co svn://anonsvn.kde.org/home/kde/branches/KDE/4.5/kdeedu/marble
}}}

If you have a svn windows's explorer shell extension like [http://tortoisesvn.tigris.org/ Tortoise SVN], you can check out the marble folder by typing in your Internet browser the address _"svn://anonsvn.kde.org/home/kde/branches/KDE/4.5/kdeedu/marble"_. After entering the address in your browser you will get a pop-up dialog asking you to select a svn application to open the link with. If you have TortoiseSVN installed in your computer, this option should already be highlighted in the pop-up dialog. If it is highlighted, just click on the dialog's Ok button. It if is not highlighted, select it to make it highlighted, and then click on the dialog's Ok button.

As a result of clicking the Ok button on the pop-up dialog, the dialog will close and a new window will pop-up showing you a view of the svn directory with the marble folder opened (see Figure 2).

||http://lh4.ggpht.com/_tmEVMS15i5Y/TLM3fXez6zI/AAAAAAAAAoI/7rpFhg-F2yk/s400/Marble_svn_view.png||
|| *Figure 2.* View of the svn directory showing the _"marble"_ folder.||

Right-click on the marble folder and select the TortoiseSVN check out option. Then select as the check out destination directory the user directory under your MSYS folder. This will typically be \usr\home\username.

After checking out the marble directory from the svn site, using the MSYS shell navigate to the marble directory just created in your computer and type:
{{{
export QTDIR=/c/sde/qt/qt_
export PATH=$QTDIR/bin:$PATH:/c/sde/cmake/bin
}}}

The command to create Makefiles on release mode is:
{{{
cmake -G"MSYS Makefiles" -Wno-dev -DQTONLY=ON -DCMAKE_BUILD_TYPE=Release ../marble
}}}

Then,
{{{
make
}}}

Copy marble include files to the folder "/local/include/marble".
{{{
mkdir /usr/local/include/marble
cp src/lib/*.h /usr/local/include/marble
cp src/lib/AbstractLayer/*.h /usr/local/include/marble
cp src/lib/geodata/*.h /usr/local/include/marble
cp src/lib/geodata/data/*.h /usr/local/include/marble
cp src/lib/geodata/handlers/dgml/*.h /usr/local/include/marble
cp src/lib/geodata/handlers/gpx/*.h /usr/local/include/marble
cp src/lib/geodata/handlers/kml/*.h /usr/local/include/marble
cp src/lib/geodata/parser/*.h /usr/local/include/marble
cp src/lib/geodata/scene/*.h /usr/local/include/marble
cp src/lib/gps/*.h /usr/local/include/marble
cp src/lib/Projections/*.h /usr/local/include/marble
}}}
Copy executable files to the folder "/local/include/bin".
{{{
cp src/marble.exe /usr/local/bin
cp src/tilecreator/tilecreator.exe /usr/local/bin
cp src/lib/geodatatest.exe /usr/local/bin
}}}
Copy main library files to the appropriate "/usr/local" folders.
{{{
cp src/lib/libmarblewidget.dll /usr/local/lib
cp src/lib/libmarblewidget.dll.a /usr/local/lib
}}}
Copy mable plugins to the folder "/usr/local/bin/marble".
{{{
mkdir /usr/local/bin/marble
cp src/plugins/render/navigation/libNavigationFloatItem.dll /usr/local/bin/marble
cp src/plugins/render/stars/libStarsPlugin.dll /usr/local/bin/marble
cp src/plugins/render/mapscale/libMapScaleFloatItem.dll /usr/local/bin/marble
cp src/plugins/render/overviewmap/libOverviewMap.dll /usr/local/bin/marble
cp src/plugins/render/compass/libCompassFloatItem.dll /usr/local/bin/marble
cp src/plugins/render/geodata/libGeoRendererPlugin.dll /usr/local/bin/marble
cp src/plugins/render/crosshairs/libCrosshairsPlugin.dll /usr/local/bin/marble
}}}


[InstallingForWindows Windows Configuration] | [http://code.google.com/p/tonatiuh/w/list Wiki Home]